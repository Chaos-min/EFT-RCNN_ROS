<launch>
  <!-- 播放rosbag数据 -->
  <node pkg="rosbag" type="play" name="player" output="log" args="-l /home/ubuntu22/eftrcnn_ros/bag/yourfile.bag" />

  <!-- 使用优化后的ros_warning.py节点进行行人检测与危险区域预警 -->
  <node name="eftrcnn_ros_warning" type="ros_warning_time.py" pkg="eftrcnn_ros" output="screen">
    <!-- 模型参数 -->
    <param name="config_path" value="$(find eftrcnn_ros)/tools/cfgs/kitti_models/eft_rcnn_B.yaml" />
    <param name="ckpt_path" value="$(find eftrcnn_ros)/tools/models/B_checkpoint_epoch_80.pth" />

    <!-- 激光雷达安装高度（单位：米） -->
    <param name="lidar_height" value="1.85" />

    <!-- 行人检测框颜色 (RGBA, 0-1范围) -->
    <param name="pedestrian_color" value="[0, 1, 1, 0.8]" /> <!-- 青色, 80%透明度 -->

    <!-- 行人检测框线宽 (单位：米) -->
    <param name="pedestrian_line_width" value="0.1" /> <!-- 与危险区域一致 -->

    <!-- 置信度阈值参数，可根据需要调整 -->
    <param name="conf_threshold" value="0.5" /> <!-- 低置信度值 -->

    <!-- 点云下采样参数 -->
    <param name="use_downsampling" value="False" /> <!-- 是否启用点云下采样 -->
    <param name="voxel_size" value="0.5" /> <!-- 体素大小(米)，越大下采样越多，建议范围0.05-0.2 -->

    <!-- 点云角度裁剪参数 -->
    <param name="use_angle_crop" value="False" /> <!-- 是否启用点云角度裁剪 -->
    <param name="angle_range" value="1.5708" /> <!-- 角度范围(弧度)，默认为pi/2(1.5708)，表示前方180度视角 -->
  </node>

  <!-- 启动RViz进行可视化，使用v3配置文件 -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find eftrcnn_ros)/launch/eftrcnn_time.rviz" />
</launch>